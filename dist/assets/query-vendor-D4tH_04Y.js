var ae=e=>{throw TypeError(e)};var Lt=(e,t,s)=>t.has(e)||ae("Cannot "+s);var i=(e,t,s)=>(Lt(e,t,"read from private field"),s?s.call(e):t.get(e)),c=(e,t,s)=>t.has(e)?ae("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),a=(e,t,s,r)=>(Lt(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),f=(e,t,s)=>(Lt(e,t,"access private method"),s);var Tt=(e,t,s,r)=>({set _(n){a(e,t,n,s)},get _(){return i(e,t,r)}});import{r as S}from"./react-vendor-CXnY9SFb.js";import{j as He}from"./ui-vendor-CvkCDyx7.js";var Et=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ft=typeof window>"u"||"Deno"in globalThis;function U(){}function Ge(e,t){return typeof e=="function"?e(t):e}function Ht(e){return typeof e=="number"&&e>=0&&e!==1/0}function we(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ft(e,t){return typeof e=="function"?e(t):e}function L(e,t){return typeof e=="function"?e(t):e}function oe(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:u,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==se(o,t.options))return!1}else if(!Mt(t.queryKey,o))return!1}if(s!=="all"){const h=t.isActive();if(s==="active"&&!h||s==="inactive"&&h)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||u&&!u(t))}function ue(e,t){const{exact:s,status:r,predicate:n,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(s){if(ct(t.options.mutationKey)!==ct(u))return!1}else if(!Mt(t.options.mutationKey,u))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function se(e,t){return(t?.queryKeyHashFn||ct)(e)}function ct(e){return JSON.stringify(e,(t,s)=>Gt(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function Mt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!Mt(e[s],t[s])):!1}function Ce(e,t){if(e===t)return e;const s=he(e)&&he(t);if(s||Gt(e)&&Gt(t)){const r=s?e:Object.keys(e),n=r.length,u=s?t:Object.keys(t),o=u.length,l=s?[]:{};let h=0;for(let y=0;y<o;y++){const b=s?y:u[y];(!s&&r.includes(b)||s)&&e[b]===void 0&&t[b]===void 0?(l[b]=void 0,h++):(l[b]=Ce(e[b],t[b]),l[b]===e[b]&&e[b]!==void 0&&h++)}return n===o&&h===n?e:l}return t}function kt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function he(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gt(e){if(!ce(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!ce(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ce(e){return Object.prototype.toString.call(e)==="[object Object]"}function Be(e){return new Promise(t=>{setTimeout(t,e)})}function Bt(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Ce(e,t):t}function _e(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function ze(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Se=Symbol(),Fe=(e,t)=>!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Se?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,it,$,dt,de,Ve=(de=class extends Et{constructor(){super();c(this,it);c(this,$);c(this,dt);a(this,dt,t=>{if(!Ft&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,$)||this.setEventListener(i(this,dt))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,$))==null||t.call(this),a(this,$,void 0))}setEventListener(t){var s;a(this,dt,t),(s=i(this,$))==null||s.call(this),a(this,$,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){i(this,it)!==t&&(a(this,it,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof i(this,it)=="boolean"?i(this,it):globalThis.document?.visibilityState!=="hidden"}},it=new WeakMap,$=new WeakMap,dt=new WeakMap,de),ie=new Ve,pt,J,yt,pe,We=(pe=class extends Et{constructor(){super();c(this,pt,!0);c(this,J);c(this,yt);a(this,yt,t=>{if(!Ft&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,J)||this.setEventListener(i(this,yt))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,J))==null||t.call(this),a(this,J,void 0))}setEventListener(t){var s;a(this,yt,t),(s=i(this,J))==null||s.call(this),a(this,J,t(this.setOnline.bind(this)))}setOnline(t){i(this,pt)!==t&&(a(this,pt,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return i(this,pt)}},pt=new WeakMap,J=new WeakMap,yt=new WeakMap,pe),jt=new We;function $e(e){return Math.min(1e3*2**e,3e4)}function Ee(e){return(e??"online")==="online"?jt.isOnline():!0}var Qe=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function Nt(e){return e instanceof Qe}function Me(e){let t=!1,s=0,r=!1,n,u,o;const l=new Promise((O,k)=>{u=O,o=k}),h=O=>{r||(C(new Qe(O)),e.abort?.())},y=()=>{t=!0},b=()=>{t=!1},m=()=>ie.isFocused()&&(e.networkMode==="always"||jt.isOnline())&&e.canRun(),p=()=>Ee(e.networkMode)&&e.canRun(),g=O=>{r||(r=!0,e.onSuccess?.(O),n?.(),u(O))},C=O=>{r||(r=!0,e.onError?.(O),n?.(),o(O))},M=()=>new Promise(O=>{n=k=>{(r||m())&&O(k)},e.onPause?.()}).then(()=>{n=void 0,r||e.onContinue?.()}),R=()=>{if(r)return;let O;const k=s===0?e.initialPromise:void 0;try{O=k??e.fn()}catch(D){O=Promise.reject(D)}Promise.resolve(O).then(g).catch(D=>{if(r)return;const j=e.retry??(Ft?0:3),lt=e.retryDelay??$e,ne=typeof lt=="function"?lt(s,D):lt,x=j===!0||typeof j=="number"&&s<j||typeof j=="function"&&j(s,D);if(t||!x){C(D);return}s++,e.onFail?.(s,D),Be(ne).then(()=>m()?void 0:M()).then(()=>{t?C(D):R()})})};return{promise:l,cancel:h,continue:()=>(n?.(),l),cancelRetry:y,continueRetry:b,canStart:p,start:()=>(p()?R():M().then(R),l)}}function Je(){let e=[],t=0,s=p=>{p()},r=p=>{p()},n=p=>setTimeout(p,0);const u=p=>{n=p},o=p=>{let g;t++;try{g=p()}finally{t--,t||y()}return g},l=p=>{t?e.push(p):n(()=>{s(p)})},h=p=>(...g)=>{l(()=>{p(...g)})},y=()=>{const p=e;e=[],p.length&&n(()=>{r(()=>{p.forEach(g=>{s(g)})})})};return{batch:o,batchCalls:h,schedule:l,setNotifyFunction:p=>{s=p},setBatchNotifyFunction:p=>{r=p},setScheduler:u}}var w=Je(),rt,ye,De=(ye=class{constructor(){c(this,rt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ht(this.gcTime)&&a(this,rt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ft?1/0:5*60*1e3))}clearGcTimeout(){i(this,rt)&&(clearTimeout(i(this,rt)),a(this,rt,void 0))}},rt=new WeakMap,ye),vt,mt,I,F,Dt,nt,K,_,ve,Xe=(ve=class extends De{constructor(t){super();c(this,K);c(this,vt);c(this,mt);c(this,I);c(this,F);c(this,Dt);c(this,nt);a(this,nt,!1),a(this,Dt,t.defaultOptions),this.setOptions(t.options),this.observers=[],a(this,I,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,a(this,vt,t.state||Ye(this.options)),this.state=i(this,vt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return i(this,F)?.promise}setOptions(t){this.options={...i(this,Dt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,I).remove(this)}setData(t,s){const r=Bt(this.state.data,t,this.options);return f(this,K,_).call(this,{data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){f(this,K,_).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){const s=i(this,F)?.promise;return i(this,F)?.cancel(t),s?s.then(U).catch(U):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,vt))}isActive(){return this.observers.some(t=>L(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!we(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),i(this,F)?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),i(this,F)?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),i(this,I).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(i(this,F)&&(i(this,nt)?i(this,F).cancel({revert:!0}):i(this,F).cancelRetry()),this.scheduleGc()),i(this,I).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||f(this,K,_).call(this,{type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(i(this,F))return i(this,F).continueRetry(),i(this,F).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(y=>y.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(a(this,nt,!0),r.signal)})},u=()=>{const h=Fe(this.options,s),y={queryKey:this.queryKey,meta:this.meta};return n(y),a(this,nt,!1),this.options.persister?this.options.persister(h,y,this):h(y)},o={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};n(o),this.options.behavior?.onFetch(o,this),a(this,mt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&f(this,K,_).call(this,{type:"fetch",meta:o.fetchOptions?.meta});const l=h=>{Nt(h)&&h.silent||f(this,K,_).call(this,{type:"error",error:h}),Nt(h)||(i(this,I).config.onError?.(h,this),i(this,I).config.onSettled?.(this.state.data,h,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return a(this,F,Me({initialPromise:s?.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}this.setData(h),i(this,I).config.onSuccess?.(h,this),i(this,I).config.onSettled?.(h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:l,onFail:(h,y)=>{f(this,K,_).call(this,{type:"failed",failureCount:h,error:y})},onPause:()=>{f(this,K,_).call(this,{type:"pause"})},onContinue:()=>{f(this,K,_).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),i(this,F).start()}},vt=new WeakMap,mt=new WeakMap,I=new WeakMap,F=new WeakMap,Dt=new WeakMap,nt=new WeakMap,K=new WeakSet,_=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...xe(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Nt(n)&&n.revert&&i(this,mt)?{...i(this,mt),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),w.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),i(this,I).notify({query:this,type:"updated",action:t})})},ve);function xe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ee(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Ye(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var N,me,Ze=(me=class extends Et{constructor(t={}){super();c(this,N);this.config=t,a(this,N,new Map)}build(t,s,r){const n=s.queryKey,u=s.queryHash??se(n,s);let o=this.get(u);return o||(o=new Xe({cache:this,queryKey:n,queryHash:u,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){i(this,N).has(t.queryHash)||(i(this,N).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=i(this,N).get(t.queryHash);s&&(t.destroy(),s===t&&i(this,N).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){w.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return i(this,N).get(t)}getAll(){return[...i(this,N).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>oe(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>oe(t,r)):s}notify(t){w.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){w.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){w.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},N=new WeakMap,me),H,E,at,G,W,ge,ts=(ge=class extends De{constructor(t){super();c(this,G);c(this,H);c(this,E);c(this,at);this.mutationId=t.mutationId,a(this,E,t.mutationCache),a(this,H,[]),this.state=t.state||Ae(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){i(this,H).includes(t)||(i(this,H).push(t),this.clearGcTimeout(),i(this,E).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){a(this,H,i(this,H).filter(s=>s!==t)),this.scheduleGc(),i(this,E).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){i(this,H).length||(this.state.status==="pending"?this.scheduleGc():i(this,E).remove(this))}continue(){return i(this,at)?.continue()??this.execute(this.state.variables)}async execute(t){a(this,at,Me({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(n,u)=>{f(this,G,W).call(this,{type:"failed",failureCount:n,error:u})},onPause:()=>{f(this,G,W).call(this,{type:"pause"})},onContinue:()=>{f(this,G,W).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,E).canRun(this)}));const s=this.state.status==="pending",r=!i(this,at).canStart();try{if(!s){f(this,G,W).call(this,{type:"pending",variables:t,isPaused:r}),await i(this,E).config.onMutate?.(t,this);const u=await this.options.onMutate?.(t);u!==this.state.context&&f(this,G,W).call(this,{type:"pending",context:u,variables:t,isPaused:r})}const n=await i(this,at).start();return await i(this,E).config.onSuccess?.(n,t,this.state.context,this),await this.options.onSuccess?.(n,t,this.state.context),await i(this,E).config.onSettled?.(n,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(n,null,t,this.state.context),f(this,G,W).call(this,{type:"success",data:n}),n}catch(n){try{throw await i(this,E).config.onError?.(n,t,this.state.context,this),await this.options.onError?.(n,t,this.state.context),await i(this,E).config.onSettled?.(void 0,n,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,n,t,this.state.context),n}finally{f(this,G,W).call(this,{type:"error",error:n})}}finally{i(this,E).runNext(this)}}},H=new WeakMap,E=new WeakMap,at=new WeakMap,G=new WeakSet,W=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),w.batch(()=>{i(this,H).forEach(r=>{r.onMutationUpdate(t)}),i(this,E).notify({mutation:this,type:"updated",action:t})})},ge);function Ae(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var T,xt,be,es=(be=class extends Et{constructor(t={}){super();c(this,T);c(this,xt);this.config=t,a(this,T,new Map),a(this,xt,Date.now())}build(t,s,r){const n=new ts({mutationCache:this,mutationId:++Tt(this,xt)._,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){const s=It(t),r=i(this,T).get(s)??[];r.push(t),i(this,T).set(s,r),this.notify({type:"added",mutation:t})}remove(t){const s=It(t);if(i(this,T).has(s)){const r=i(this,T).get(s)?.filter(n=>n!==t);r&&(r.length===0?i(this,T).delete(s):i(this,T).set(s,r))}this.notify({type:"removed",mutation:t})}canRun(t){const s=i(this,T).get(It(t))?.find(r=>r.state.status==="pending");return!s||s===t}runNext(t){return i(this,T).get(It(t))?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){w.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...i(this,T).values()].flat()}find(t){const s={exact:!0,...t};return this.getAll().find(r=>ue(s,r))}findAll(t={}){return this.getAll().filter(s=>ue(t,s))}notify(t){w.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return w.batch(()=>Promise.all(t.map(s=>s.continue().catch(U))))}},T=new WeakMap,xt=new WeakMap,be);function It(e){return e.options.scope?.id??String(e.mutationId)}function _t(e){return{onFetch:(t,s)=>{const r=async()=>{const n=t.options,u=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[],h={pages:[],pageParams:[]};let y=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},m=Fe(t.options,t.fetchOptions),p=async(C,M,R)=>{if(y)return Promise.reject();if(M==null&&C.pages.length)return Promise.resolve(C);const O={queryKey:t.queryKey,pageParam:M,direction:R?"backward":"forward",meta:t.options.meta};b(O);const k=await m(O),{maxPages:D}=t.options,j=R?ze:_e;return{pages:j(C.pages,k,D),pageParams:j(C.pageParams,M,D)}};let g;if(u&&o.length){const C=u==="backward",M=C?qe:zt,R={pages:o,pageParams:l},O=M(n,R);g=await p(R,O,C)}else{g=await p(h,l[0]??n.initialPageParam);const C=e??o.length;for(let M=1;M<C;M++){const R=zt(n,g);g=await p(g,R)}}return g};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=r}}}function zt(e,{pages:t,pageParams:s}){const r=t.length-1;return e.getNextPageParam(t[r],t,s[r],s)}function qe(e,{pages:t,pageParams:s}){return e.getPreviousPageParam?.(t[0],t,s[0],s)}function ss(e,t){return t?zt(e,t)!=null:!1}function is(e,t){return!t||!e.getPreviousPageParam?!1:qe(e,t)!=null}var P,X,Y,gt,bt,Z,Ot,Pt,Oe,Rs=(Oe=class{constructor(e={}){c(this,P);c(this,X);c(this,Y);c(this,gt);c(this,bt);c(this,Z);c(this,Ot);c(this,Pt);a(this,P,e.queryCache||new Ze),a(this,X,e.mutationCache||new es),a(this,Y,e.defaultOptions||{}),a(this,gt,new Map),a(this,bt,new Map),a(this,Z,0)}mount(){Tt(this,Z)._++,i(this,Z)===1&&(a(this,Ot,ie.subscribe(async e=>{e&&(await this.resumePausedMutations(),i(this,P).onFocus())})),a(this,Pt,jt.subscribe(async e=>{e&&(await this.resumePausedMutations(),i(this,P).onOnline())})))}unmount(){var e,t;Tt(this,Z)._--,i(this,Z)===0&&((e=i(this,Ot))==null||e.call(this),a(this,Ot,void 0),(t=i(this,Pt))==null||t.call(this),a(this,Pt,void 0))}isFetching(e){return i(this,P).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return i(this,X).findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return i(this,P).get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const s=this.defaultQueryOptions(e),r=i(this,P).build(this,s);return e.revalidateIfStale&&r.isStaleByTime(ft(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return i(this,P).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),u=i(this,P).get(r.queryHash)?.state.data,o=Ge(t,u);if(o!==void 0)return i(this,P).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return w.batch(()=>i(this,P).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return i(this,P).get(t.queryHash)?.state}removeQueries(e){const t=i(this,P);w.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=i(this,P),r={type:"active",...e};return w.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const s={revert:!0,...t},r=w.batch(()=>i(this,P).findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(U).catch(U)}invalidateQueries(e={},t={}){return w.batch(()=>{if(i(this,P).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const s={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e={},t){const s={...t,cancelRefetch:t?.cancelRefetch??!0},r=w.batch(()=>i(this,P).findAll(e).filter(n=>!n.isDisabled()).map(n=>{let u=n.fetch(void 0,s);return s.throwOnError||(u=u.catch(U)),n.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(U)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=i(this,P).build(this,t);return s.isStaleByTime(ft(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(U).catch(U)}fetchInfiniteQuery(e){return e.behavior=_t(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(U).catch(U)}resumePausedMutations(){return jt.isOnline()?i(this,X).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,P)}getMutationCache(){return i(this,X)}getDefaultOptions(){return i(this,Y)}setDefaultOptions(e){a(this,Y,e)}setQueryDefaults(e,t){i(this,gt).set(ct(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...i(this,gt).values()];let s={};return t.forEach(r=>{Mt(e,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(e,t){i(this,bt).set(ct(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...i(this,bt).values()];let s={};return t.forEach(r=>{Mt(e,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...i(this,Y).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=se(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Se&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...i(this,Y).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){i(this,P).clear(),i(this,X).clear()}},P=new WeakMap,X=new WeakMap,Y=new WeakMap,gt=new WeakMap,bt=new WeakMap,Z=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,Oe),A,d,At,Q,ot,Rt,B,qt,wt,Ct,ut,ht,tt,St,v,Qt,Vt,Wt,$t,Jt,Xt,Yt,Zt,Ie,Pe,Te=(Pe=class extends Et{constructor(t,s){super();c(this,v);c(this,A);c(this,d);c(this,At);c(this,Q);c(this,ot);c(this,Rt);c(this,B);c(this,qt);c(this,wt);c(this,Ct);c(this,ut);c(this,ht);c(this,tt);c(this,St,new Set);this.options=s,a(this,A,t),a(this,B,null),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,d).addObserver(this),le(i(this,d),this.options)?f(this,v,Qt).call(this):this.updateResult(),f(this,v,Jt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return te(i(this,d),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return te(i(this,d),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,v,Xt).call(this),f(this,v,Yt).call(this),i(this,d).removeObserver(this)}setOptions(t,s){const r=this.options,n=i(this,d);if(this.options=i(this,A).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof L(this.options.enabled,i(this,d))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,v,Zt).call(this),i(this,d).setOptions(this.options),r._defaulted&&!kt(this.options,r)&&i(this,A).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,d),observer:this});const u=this.hasListeners();u&&fe(i(this,d),n,this.options,r)&&f(this,v,Qt).call(this),this.updateResult(s),u&&(i(this,d)!==n||L(this.options.enabled,i(this,d))!==L(r.enabled,i(this,d))||ft(this.options.staleTime,i(this,d))!==ft(r.staleTime,i(this,d)))&&f(this,v,Vt).call(this);const o=f(this,v,Wt).call(this);u&&(i(this,d)!==n||L(this.options.enabled,i(this,d))!==L(r.enabled,i(this,d))||o!==i(this,tt))&&f(this,v,$t).call(this,o)}getOptimisticResult(t){const s=i(this,A).getQueryCache().build(i(this,A),t),r=this.createResult(s,t);return ns(this,r)&&(a(this,Q,r),a(this,Rt,this.options),a(this,ot,i(this,d).state)),r}getCurrentResult(){return i(this,Q)}trackResult(t,s){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),s?.(n),t[n])})}),r}trackProp(t){i(this,St).add(t)}getCurrentQuery(){return i(this,d)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=i(this,A).defaultQueryOptions(t),r=i(this,A).getQueryCache().build(i(this,A),s);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,s))}fetch(t){return f(this,v,Qt).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,Q)))}createResult(t,s){const r=i(this,d),n=this.options,u=i(this,Q),o=i(this,ot),l=i(this,Rt),y=t!==r?t.state:i(this,At),{state:b}=t;let m={...b},p=!1,g;if(s._optimisticResults){const x=this.hasListeners(),Kt=!x&&le(t,s),Ne=x&&fe(t,r,s,n);(Kt||Ne)&&(m={...m,...xe(b.data,t.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:C,errorUpdatedAt:M,status:R}=m;if(s.select&&m.data!==void 0)if(u&&m.data===o?.data&&s.select===i(this,qt))g=i(this,wt);else try{a(this,qt,s.select),g=s.select(m.data),g=Bt(u?.data,g,s),a(this,wt,g),a(this,B,null)}catch(x){a(this,B,x)}else g=m.data;if(s.placeholderData!==void 0&&g===void 0&&R==="pending"){let x;if(u?.isPlaceholderData&&s.placeholderData===l?.placeholderData)x=u.data;else if(x=typeof s.placeholderData=="function"?s.placeholderData(i(this,Ct)?.state.data,i(this,Ct)):s.placeholderData,s.select&&x!==void 0)try{x=s.select(x),a(this,B,null)}catch(Kt){a(this,B,Kt)}x!==void 0&&(R="success",g=Bt(u?.data,x,s),p=!0)}i(this,B)&&(C=i(this,B),g=i(this,wt),M=Date.now(),R="error");const O=m.fetchStatus==="fetching",k=R==="pending",D=R==="error",j=k&&O,lt=g!==void 0;return{status:R,fetchStatus:m.fetchStatus,isPending:k,isSuccess:R==="success",isError:D,isInitialLoading:j,isLoading:j,data:g,dataUpdatedAt:m.dataUpdatedAt,error:C,errorUpdatedAt:M,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>y.dataUpdateCount||m.errorUpdateCount>y.errorUpdateCount,isFetching:O,isRefetching:O&&!k,isLoadingError:D&&!lt,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:D&&lt,isStale:re(t,s),refetch:this.refetch}}updateResult(t){const s=i(this,Q),r=this.createResult(i(this,d),this.options);if(a(this,ot,i(this,d).state),a(this,Rt,this.options),i(this,ot).data!==void 0&&a(this,Ct,i(this,d)),kt(r,s))return;a(this,Q,r);const n={},u=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!i(this,St).size)return!0;const h=new Set(l??i(this,St));return this.options.throwOnError&&h.add("error"),Object.keys(i(this,Q)).some(y=>{const b=y;return i(this,Q)[b]!==s[b]&&h.has(b)})};t?.listeners!==!1&&u()&&(n.listeners=!0),f(this,v,Ie).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,v,Jt).call(this)}},A=new WeakMap,d=new WeakMap,At=new WeakMap,Q=new WeakMap,ot=new WeakMap,Rt=new WeakMap,B=new WeakMap,qt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,ut=new WeakMap,ht=new WeakMap,tt=new WeakMap,St=new WeakMap,v=new WeakSet,Qt=function(t){f(this,v,Zt).call(this);let s=i(this,d).fetch(this.options,t);return t?.throwOnError||(s=s.catch(U)),s},Vt=function(){f(this,v,Xt).call(this);const t=ft(this.options.staleTime,i(this,d));if(Ft||i(this,Q).isStale||!Ht(t))return;const r=we(i(this,Q).dataUpdatedAt,t)+1;a(this,ut,setTimeout(()=>{i(this,Q).isStale||this.updateResult()},r))},Wt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,d)):this.options.refetchInterval)??!1},$t=function(t){f(this,v,Yt).call(this),a(this,tt,t),!(Ft||L(this.options.enabled,i(this,d))===!1||!Ht(i(this,tt))||i(this,tt)===0)&&a(this,ht,setInterval(()=>{(this.options.refetchIntervalInBackground||ie.isFocused())&&f(this,v,Qt).call(this)},i(this,tt)))},Jt=function(){f(this,v,Vt).call(this),f(this,v,$t).call(this,f(this,v,Wt).call(this))},Xt=function(){i(this,ut)&&(clearTimeout(i(this,ut)),a(this,ut,void 0))},Yt=function(){i(this,ht)&&(clearInterval(i(this,ht)),a(this,ht,void 0))},Zt=function(){const t=i(this,A).getQueryCache().build(i(this,A),this.options);if(t===i(this,d))return;const s=i(this,d);a(this,d,t),a(this,At,t.state),this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))},Ie=function(t){w.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(i(this,Q))}),i(this,A).getQueryCache().notify({query:i(this,d),type:"observerResultsUpdated"})})},Pe);function rs(e,t){return L(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function le(e,t){return rs(e,t)||e.state.data!==void 0&&te(e,t,t.refetchOnMount)}function te(e,t,s){if(L(t.enabled,e)!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&re(e,t)}return!1}function fe(e,t,s,r){return(e!==t||L(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&re(e,s)}function re(e,t){return L(t.enabled,e)!==!1&&e.isStaleByTime(ft(t.staleTime,e))}function ns(e,t){return!kt(e.getCurrentResult(),t)}var as=class extends Te{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:_t()},t)}getOptimisticResult(e){return e.behavior=_t(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:s}=e,r=super.createResult(e,t),{isFetching:n,isRefetching:u,isError:o,isRefetchError:l}=r,h=s.fetchMeta?.fetchMore?.direction,y=o&&h==="forward",b=n&&h==="forward",m=o&&h==="backward",p=n&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ss(t,s.data),hasPreviousPage:is(t,s.data),isFetchNextPageError:y,isFetchingNextPage:b,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:l&&!y&&!m,isRefetching:u&&!b&&!p}}},et,st,q,z,V,Ut,ee,Re,os=(Re=class extends Et{constructor(t,s){super();c(this,V);c(this,et);c(this,st);c(this,q);c(this,z);a(this,et,t),this.setOptions(s),this.bindMethods(),f(this,V,Ut).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=i(this,et).defaultMutationOptions(t),kt(this.options,s)||i(this,et).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,q),observer:this}),s?.mutationKey&&this.options.mutationKey&&ct(s.mutationKey)!==ct(this.options.mutationKey)?this.reset():i(this,q)?.state.status==="pending"&&i(this,q).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||i(this,q)?.removeObserver(this)}onMutationUpdate(t){f(this,V,Ut).call(this),f(this,V,ee).call(this,t)}getCurrentResult(){return i(this,st)}reset(){i(this,q)?.removeObserver(this),a(this,q,void 0),f(this,V,Ut).call(this),f(this,V,ee).call(this)}mutate(t,s){return a(this,z,s),i(this,q)?.removeObserver(this),a(this,q,i(this,et).getMutationCache().build(i(this,et),this.options)),i(this,q).addObserver(this),i(this,q).execute(t)}},et=new WeakMap,st=new WeakMap,q=new WeakMap,z=new WeakMap,V=new WeakSet,Ut=function(){const t=i(this,q)?.state??Ae();a(this,st,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},ee=function(t){w.batch(()=>{if(i(this,z)&&this.hasListeners()){const s=i(this,st).variables,r=i(this,st).context;t?.type==="success"?(i(this,z).onSuccess?.(t.data,s,r),i(this,z).onSettled?.(t.data,null,s,r)):t?.type==="error"&&(i(this,z).onError?.(t.error,s,r),i(this,z).onSettled?.(void 0,t.error,s,r))}this.listeners.forEach(s=>{s(i(this,st))})})},Re),Ue=S.createContext(void 0),ke=e=>{const t=S.useContext(Ue);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ws=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),He.jsx(Ue.Provider,{value:e,children:t})),je=S.createContext(!1),us=()=>S.useContext(je);je.Provider;function hs(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var cs=S.createContext(hs()),ls=()=>S.useContext(cs);function Ke(e,t){return typeof e=="function"?e(...t):!!e}function fs(){}var ds=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},ps=e=>{S.useEffect(()=>{e.clearReset()},[e])},ys=({result:e,errorResetBoundary:t,throwOnError:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Ke(s,[e.error,r]),vs=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},ms=(e,t)=>e?.suspense&&t.isPending,gs=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Le(e,t,s){const r=ke(),n=us(),u=ls(),o=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",vs(o),ds(o,u),ps(u);const[l]=S.useState(()=>new t(r,o)),h=l.getOptimisticResult(o);if(S.useSyncExternalStore(S.useCallback(y=>{const b=n?()=>{}:l.subscribe(w.batchCalls(y));return l.updateResult(),b},[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),ms(o,h))throw gs(o,l,u);if(ys({result:h,errorResetBoundary:u,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw h.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.notifyOnChangeProps?h:l.trackResult(h)}function Cs(e,t){return Le(e,Te)}function Ss(e,t){const s=ke(),[r]=S.useState(()=>new os(s,e));S.useEffect(()=>{r.setOptions(e)},[r,e]);const n=S.useSyncExternalStore(S.useCallback(o=>r.subscribe(w.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u=S.useCallback((o,l)=>{r.mutate(o,l).catch(fs)},[r]);if(n.error&&Ke(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:u,mutateAsync:n.mutate}}function Fs(e,t){return Le(e,as)}export{Rs as Q,Fs as a,ke as b,Ss as c,ws as d,Cs as u};
